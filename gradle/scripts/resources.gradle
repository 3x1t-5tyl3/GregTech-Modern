String getConfig(String key) {
    return project.properties.get(key)
}

def mod_id = getConfig("mod_id")
def version = getConfig("version")
def mod_license = getConfig("mod_license")
def mod_name = getConfig("mod_name")
def mod_description = getConfig("mod_description")
def mod_url = getConfig("mod_url")
def loader_version = getConfig("loader_version")

tasks.withType(ProcessResources).configureEach {
    var replaceProperties = [
            version             : version,
            mod_id              : mod_id,
            forge_version       : forge.versions.forgeShortVersion.get().split("\\.")[0], // only specify major version of forge
            loader_version      : loader_version,
            kjs_version         : forge.versions.kubejs.get().split("\\.")[0], // only specify major version of kjs
            minecraft_version   : libs.versions.minecraft.get(),
            forge_version       : forge.versions.forgeShortVersion.get().split("\\.")[0], // only specify major version of forge
            mod_id              : mod_id, mod_name: mod_name, mod_license: mod_license, mod_version: mod_version,
            mod_description     : mod_description, mod_url: mod_url
    ]
    inputs.properties replaceProperties

    filesMatching(['META-INF/mods.toml']) {
        expand replaceProperties + [project: project]
    }
}